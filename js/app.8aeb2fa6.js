(function(e){function n(n){for(var r,o,s=n[0],c=n[1],l=n[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(n);while(f.length)f.shift()();return a.push.apply(a,l||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,s=1;s<t.length;s++){var c=t[s];0!==i[c]&&(r=!1)}r&&(a.splice(n--,1),e=o(o.s=t[0]))}return e}var r={},i={app:0},a=[];function o(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=r,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=n,s=s.slice();for(var l=0;l<s.length;l++)n(s[l]);var u=c;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"0ab4":function(e,n,t){"use strict";var r=t("5b3a"),i=t.n(r);i.a},"399b":function(e,n,t){},"53f6":function(e,n,t){"use strict";var r=t("399b"),i=t.n(r);i.a},"56d7":function(e,n,t){"use strict";t.r(n);t("cadf"),t("551c"),t("f751"),t("097d"),t("6d93");var r=t("2b0e"),i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("BRSUI")],1)},a=[],o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"brs-container"},[t("BRSViewer",{attrs:{brsBuff:e.brsBuff},nativeOn:{click:function(n){e.interacting=!1}}}),t("div",{staticClass:"brs-main",class:{"keep-open":e.keepSidebarOpen},on:{mouseenter:function(n){e.interacting=!0},mouseleave:e.stopInteracting}},[t("div",{staticClass:"brs-header"},[t("div",{staticClass:"brs-header-content"},[e._m(0),t("p",[e._v("Share your Brickadia builds")]),t("div",{staticClass:"brs-upload",class:{"upload-finished":e.uploadFinished}},[e.error?t("p",{staticClass:"error",domProps:{textContent:e._s(e.error)}}):e._e(),t("button",{on:{click:function(n){return e.$refs.fileUpload.click()}}},[e._v("Open .brs")]),e.fileToUpload?t("div",[t("p",[e._v(e._s(e.fileToUpload.name))]),e.brs?t("p",[e._v(e._s(e.brs.author.name)+" - "+e._s(e.brs.map))]):e._e(),t("button",{attrs:{disabled:!e.fileUploadIsValid},on:{click:e.uploadFile}},[e._v("Upload")])]):e._e(),t("input",{ref:"fileUpload",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(n){return e.onFileChange(n)}}})])]),t("svg",{staticClass:"brs-header-bg",attrs:{width:"300",height:"300"}},[t("g",{staticClass:"cloud",attrs:{id:"cloud1"}},[t("path",{attrs:{d:"M-300,0C-300,0,300,0,300,0C500,33.33333333333333,500,66.66666666666666,300,100C200,161.6064433771357,100,161.6064433771357,0,100C-100,161.6064433771357,-200,161.6064433771357,-300,100C-500,66.66666666666666,-500,33.33333333333333,-300,0"}})]),t("g",{staticClass:"cloud",attrs:{id:"cloud2"}},[t("path",{attrs:{d:"M-300,0C-300,0,300,0,300,0C500,33.33333333333333,500,66.66666666666666,300,100C200,161.6064433771357,100,161.6064433771357,0,100C-100,161.6064433771357,-200,161.6064433771357,-300,100C-500,66.66666666666666,-500,33.33333333333333,-300,0"}})]),t("g",{staticClass:"cloud",attrs:{id:"cloud3"}},[t("path",{attrs:{d:"M-300,0C-300,0,300,0,300,0C500,33.33333333333333,500,66.66666666666666,300,100C200,161.6064433771357,100,161.6064433771357,0,100C-100,161.6064433771357,-200,161.6064433771357,-300,100C-500,66.66666666666666,-500,33.33333333333333,-300,0"}})])])]),t("div",{staticClass:"brs-list-container"},[e._m(1),t("div",{staticClass:"brs-list"},e._l(e.brsInfoWState,(function(n){return t("div",{key:n.brsUrl,staticClass:"brs-list-item",class:{selected:n.selected},on:{click:function(t){return e.onEntryClick(t,n)}}},[t("h3",[e._v(e._s(n.name))]),t("p",[e._v(e._s(n.author))]),e._e()])})),0)]),e._m(2)])],1)},s=[function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"brs-header-title"},[r("img",{staticClass:"logo",attrs:{alt:"brs.world logo",src:t("8e7e")}}),r("h1",[e._v("BRS.world")])])},function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("h2",[t("u",[e._v("Featured Builds")])])},function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"brs-footer"},[t("p",[e._v("Made by "),t("a",{attrs:{href:"http://twitter.com/cobertos",target:"_blank"}},[e._v("@Cobertos")])]),t("p",[t("a",{attrs:{href:"https://github.com/Cobertos/brs.world",target:"_blank"}},[e._v("Hosted on GitHub")])])])}],c=(t("8e6e"),t("456d"),t("ac6a"),t("96cf"),t("3b8d")),l=t("bd86");t("7353"),t("6762"),t("2fdb");function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(e).filter((function(e){return!n.includes(e)})).forEach((function(n){Object.defineProperty(e,n,{configurable:!1})})),e}var d=t("d225"),f=t("b0b4"),p=function(){function e(){Object(d["a"])(this,e),this._baseUrl="https://vn9e1kgqpb.execute-api.us-east-2.amazonaws.com/dev"}return Object(f["a"])(e,[{key:"uploadBuild",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._baseUrl,"/build"),{method:"PUT"});case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.next=8,fetch(r.url,{method:"PUT",body:n,headers:{"Content-Type":"application/octet-stream","x-amz-acl":"public-read"}});case 8:case"end":return e.stop()}}),e,this)})));function n(n){return e.apply(this,arguments)}return n}()},{key:"getFeaturedBuilds",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._baseUrl,"/build"));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()},{key:"getBuildById",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._baseUrl,"/build"),{method:"POST",body:JSON.stringify({id:n}),headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e,this)})));function n(n){return e.apply(this,arguments)}return n}()}]),e}(),h=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("canvas",{ref:"renderer"},[e._v("No WebGL Boi")]),e.canControl?t("div",{staticClass:"renderer-overlay"},[t("transition",{attrs:{name:"hide"}},[e.isControlling?t("p",{key:"2"},[e._v("Press "),t("kbd",[e._v("Esc")]),e._v(" to exit camera. "),t("kbd",[e._v("W")]),t("kbd",[e._v("A")]),t("kbd",[e._v("S")]),t("kbd",[e._v("D")]),t("kbd",[e._v("Space")]),t("kbd",[e._v("Shift")]),e._v(" to move. Mouse to look.")]):t("p",{key:"1"},[e._v("Take control of the camera by clicking")])])],1):e._e()])},v=[],m=t("75fc"),g=t("5a89"),b=t("b317"),_=(t("63d9"),t("768b")),w=t("308d"),y=t("6bb5"),k=t("4e2b"),C=function(e){function n(){return Object(d["a"])(this,n),Object(w["a"])(this,Object(y["a"])(n).apply(this,arguments))}return Object(k["a"])(n,e),Object(f["a"])(n,[{key:"onBeforeCompile",value:function(e,n){e.vertexShader="\n#define STANDARD\n#define USE_UV\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n  varying vec3 vNormal;\n  #ifdef USE_TANGENT\n    varying vec3 vTangent;\n    varying vec3 vBitangent;\n  #endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// === INSTANCED ===\nvec3 applyTRS( vec3 position, vec3 translation, vec4 quaternion, vec3 scale ) {\n  position *= scale;\n  position += 2.0 * cross( quaternion.xyz, cross( quaternion.xyz, position ) + quaternion.w * position );\n  return position + translation;\n}\nattribute vec3 instancePosition;\nattribute vec4 instanceQuaternion;\nattribute vec3 instanceScale;\nattribute vec3 instanceColor;\n\nvoid main() {\n  #include <uv_vertex>\n  vUv *= vec2(10.0, 10.0);\n  #include <uv2_vertex>\n  #include <color_vertex>\n  // === INSTANCED (color) ===\n  #ifdef USE_COLOR\n    vColor.xyz = instanceColor.xyz;\n  #endif\n  #include <beginnormal_vertex>\n  #include <morphnormal_vertex>\n  #include <skinbase_vertex>\n  #include <skinnormal_vertex>\n  #include <defaultnormal_vertex>\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n  vNormal = normalize( transformedNormal );\n  #ifdef USE_TANGENT\n    vTangent = normalize( transformedTangent );\n    vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n  #endif\n#endif\n  #include <begin_vertex>\n  // === INSTANCED (position) ===\n  transformed = applyTRS( transformed, instancePosition, instanceQuaternion, instanceScale );\n\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <displacementmap_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n  #include <clipping_planes_vertex>\n  vViewPosition = - mvPosition.xyz;\n  #include <worldpos_vertex>\n  #include <shadowmap_vertex>\n  #include <fog_vertex>\n  //vColor = instanceColor;//color;\n}\n        ",e.fragmentShader="\n#define STANDARD\n#ifdef PHYSICAL\n  #define REFLECTIVITY\n  #define CLEARCOAT\n  #define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n  uniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n  uniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n  uniform float clearcoat;\n  uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n  uniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n  varying vec3 vNormal;\n  #ifdef USE_TANGENT\n    varying vec3 vTangent;\n    varying vec3 vBitangent;\n  #endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\n// === MINE ===\n//varying vec3 vColor;\n\nvoid main() {\n  #include <clipping_planes_fragment>\n  vec4 diffuseColor = vec4( diffuse, opacity );\n  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n  vec3 totalEmissiveRadiance = emissive;\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  //diffuseColor.rgb = vColor;\n  #include <alphamap_fragment>\n  #include <alphatest_fragment>\n  #include <roughnessmap_fragment>\n  #include <metalnessmap_fragment>\n  #include <normal_fragment_begin>\n\n  #include <normal_fragment_maps>\n  #include <clearcoat_normal_fragment_begin>\n  #include <clearcoat_normal_fragment_maps>\n  #include <emissivemap_fragment>\n  // accumulation\n  #include <lights_physical_fragment>\n  #include <lights_fragment_begin>\n  #include <lights_fragment_maps>\n  #include <lights_fragment_end>\n  // modulation\n  #include <aomap_fragment>\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n  // this is a stub for the transparency model\n  #ifdef TRANSPARENCY\n    diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n  #endif\n  gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n  #include <premultiplied_alpha_fragment>\n  #include <dithering_fragment>\n}\n        "}}]),n}(g["MeshStandardMaterial"]),x=function(e){function n(e){var t;Object(d["a"])(this,n);var r=n._buildResources(e),i=Object(_["a"])(r,2),a=i[0],o=i[1];return t=Object(w["a"])(this,Object(y["a"])(n).call(this,a,o)),t.brs=e,t}return Object(k["a"])(n,e),Object(f["a"])(n,null,[{key:"brickWidth",value:function(){return 10}}]),Object(f["a"])(n,null,[{key:"fromBuffer",value:function(e){console.log("Start parse...");var t=BRS.read(e);return new n(t)}},{key:"_buildResources",value:function(e){var t=new g["BoxBufferGeometry"](1,1,1);t.attributes.uv.array=t.attributes.uv.array.map((function(e){return e/n.brickWidth()}));var r=[],i=[],a=[],o=[];console.log("Starting load..."),e.bricks.forEach((function(n,t){if(t%1e3===0&&console.log("Brick ".concat(t)),n.visibility){var s=new g["Vector3"](n.position[0],n.position[2],n.position[1]),c=[new g["Vector3"](1,0,0),new g["Vector3"](-1,0,0),new g["Vector3"](0,0,1),new g["Vector3"](0,0,-1),new g["Vector3"](0,1,0),new g["Vector3"](0,-1,0)],l=[0,Math.PI/2,Math.PI,3*Math.PI/2],u=(new g["Quaternion"]).setFromAxisAngle(c[n.direction],l[n.rotation]),d=new g["Vector3"](2*n.size[0],2*n.size[2],2*n.size[1]),f=Array.isArray(n.color)?new g["Color"](n.color[0]/255,n.color[1]/255,n.color[2]/255):e.colors[n.color];r.push(s.x,s.y,s.z),i.push(u.x,u.y,u.z,u.w),a.push(d.x,d.y,d.z),o.push(f[0]/255,f[1]/255,f[2]/255)}}));var s=new g["InstancedBufferGeometry"];s.index=t.index,s.attributes.position=t.attributes.position,s.addAttribute("instancePosition",new g["InstancedBufferAttribute"](new Float32Array(r),3)),s.addAttribute("instanceQuaternion",new g["InstancedBufferAttribute"](new Float32Array(i),4)),s.addAttribute("instanceScale",new g["InstancedBufferAttribute"](new Float32Array(a),3)),s.addAttribute("instanceColor",new g["InstancedBufferAttribute"](new Float32Array(o),3));var c=new C({vertexColors:g["VertexColors"],flatShading:!0,map:void 0});return(new g["TextureLoader"]).load("brickTOP.png",(function(e){e.wrapS=g["RepeatWrapping"],e.wrapT=g["RepeatWrapping"]})),[s,c]}}]),n}(g["Mesh"]),S=function(e){function n(){var e;Object(d["a"])(this,n),e=Object(w["a"])(this,Object(y["a"])(n).call(this));var t=new g["AmbientLight"](12303291);e.add(t);var r=new g["DirectionalLight"](16777215);r.position.set(20,30,-5),r.target.position.set(0,0,0),r.castShadow=!0,r.shadow.camera.left=-30,r.shadow.camera.top=-30,r.shadow.camera.right=30,r.shadow.camera.bottom=30,r.shadow.camera.near=20,r.shadow.camera.far=200,r.shadow.bias=-.001,r.shadow.mapSize.width=r.shadow.mapSize.height=2048,e.add(r);var i=new g["PointLight"](16777181,2,2);i.position.set(0,3,-2),e.add(i),(new g["TextureLoader"]).load("brickgreen.png",(function(e){e.wrapS=g["RepeatWrapping"],e.wrapT=g["RepeatWrapping"],a.map=e}));var a=new g["MeshStandardMaterial"]({color:43520,map:void 0}),o=1e5,s=new g["Mesh"](new g["PlaneBufferGeometry"](o,o),a),c=s.geometry.getAttribute("uv");return console.log(c),c.array=c.array.map((function(e){return e*o/x.brickWidth()})),c.needsUpdate=!0,s.quaternion.setFromAxisAngle(new g["Vector3"](1,0,0),-Math.PI/2),s.frustumCulled=!1,e.add(s),e.fog=new g["FogExp2"](10066431,25e-6),e}return Object(k["a"])(n,e),n}(g["Scene"]),O={name:"BRSViewer",props:{brsBuff:ArrayBuffer},data:function(){return{renderer:void 0,scene:u(new S),cam:u(new g["PerspectiveCamera"](75,1,1,8e4)),buildBounds:void 0,rafID:void 0,controls:{isLocked:!1},keyMap:{forward:!1,backward:!1,right:!1,left:!1,up:!1,down:!1,sprint:!1},velocity:u(new g["Vector3"](0,0,0)),_lastTime:Date.now()}},computed:{isControlling:function(){return this.controls.isLocked},canControl:function(){return!!this.brsBuff}},mounted:function(){var e=this;this.renderer=u(new g["WebGLRenderer"]({canvas:this.$refs.renderer,antialias:!0,logarithmicDepthBuffer:!0})),this.renderer.setClearColor(new g["Color"](10066431)),this.cam.position.set(0,10,0),this.controls=u(new b["a"](this.cam,this.renderer.domElement),Object.keys(this.controls));var n=function(n){var t="keydown"===n.type;switch(event.key){case"Down":case"ArrowDown":case"s":case"S":e.keyMap.forward=t;break;case"Up":case"ArrowUp":case"w":case"W":e.keyMap.backward=t;break;case"Left":case"ArrowLeft":case"a":case"A":e.keyMap.left=t;break;case"Right":case"ArrowRight":case"d":case"D":e.keyMap.right=t;break;case"Space":case" ":e.keyMap.up=t;break;case"Shift":e.keyMap.down=t;break;case"Control":e.keyMap.sprint=t;break;default:return}n.preventDefault(),e.velocity.x=-e.keyMap.left+e.keyMap.right,e.velocity.y=-e.keyMap.down+e.keyMap.up,e.velocity.z=-e.keyMap.backward+e.keyMap.forward,e.velocity.normalize(),e.velocity.multiplyScalar(e.keyMap.sprint?2:1)};this.renderer.domElement.addEventListener("click",(function(){e.canControl&&e.enableControls()})),this.scene.add(this.controls.getObject()),window.addEventListener("keydown",n),window.addEventListener("keyup",n),this.resize(),window.addEventListener("resize",this.resize.bind(this))},watch:{brsBuff:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var n,t,r,i,a,o,s,c,l,d=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.brsBuff){e.next=2;break}return e.abrupt("return");case 2:window.cancelAnimationFrame(this.rafID),(n=this.scene).remove.apply(n,Object(m["a"])(this.scene.children.filter((function(e){return e instanceof x})))),t=x.fromBuffer(this.brsBuff),t.frustumCulled=!1,this.scene.add(t),r=t.brs.bricks.map((function(e){if(e.visibility)return new g["Vector3"](e.position[0],e.position[2],e.position[1])})).filter((function(e){return!!e})),i=r.reduce((function(e,n){return e.add(n)}),new g["Vector3"](0,0,0)).multiplyScalar(1/r.length),a=r.map((function(e){return e.distanceTo(i)})),o=a.reduce((function(e,n){return e+n}),0)/r.length,s=a.reduce((function(e,n){return e+Math.pow(Math.abs(n-o),2)}),0),c=Math.sqrt(s/r.length),l=0,this.buildBounds=u(new g["Box3"]),t.brs.bricks.forEach((function(e){var n=new g["Vector3"](e.position[0],e.position[2],e.position[1]).distanceTo(i);if(n>o+3*c||n<o-3*c)return console.log("Removed outlier at Brickadia position ".concat(e.position," ").concat(n)),void l++;d.buildBounds.expandByPoint(new g["Vector3"](e.position[0],e.position[2],e.position[1]))})),console.log("Center: ".concat(i.x," ").concat(i.y," ").concat(i.z)),console.log("Mean: ".concat(o)),console.log("StdD: ".concat(c)),console.log("Outl: ".concat(l)),console.log("BrickCount: ".concat(r.length)),console.log(this.buildBounds),this.rafID=window.requestAnimationFrame(this.render.bind(this));case 23:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()},methods:{resize:function(){this.$refs.renderer.setAttribute("style","");var e=this.$refs.renderer.getBoundingClientRect();this.renderer.setSize(e.width,e.height),this.cam.aspect=e.width/e.height,this.cam.updateProjectionMatrix()},render:function(){if(this.rafID=window.requestAnimationFrame(this.render.bind(this)),this.controls.isLocked){var e=Date.now()-this._lastTime,n=this.cam.getWorldDirection(new g["Vector3"]),t=n.clone().cross(g["Object3D"].DefaultUp).normalize(),r=g["Object3D"].DefaultUp.clone();this.cam.position.add(n.multiplyScalar(-this.velocity.z*e)).add(t.multiplyScalar(this.velocity.x*e)).add(r.multiplyScalar(this.velocity.y*e))}else{var i=Date.now()/1e3/30*Math.PI*2,a=Math.sin(i),o=Math.cos(i),s=this.buildBounds.getCenter(new g["Vector3"]),c=this.buildBounds.getSize(new g["Vector3"]).multiplyScalar(.5);this.cam.position.copy(s),this.cam.position.add(new g["Vector3"](1.5*c.x*a,2*c.y,1.5*c.z*o)),this.cam.lookAt(s.clone().add(new g["Vector3"](c.x*a,0,c.z*o)))}this._lastTime=Date.now(),this.renderer.render(this.scene,this.cam)},disableControls:function(){this.controls.unlock()},enableControls:function(){this.controls.lock()}}},B=O,R=(t("53f6"),t("2877")),j=Object(R["a"])(B,h,v,!1,null,null,null),A=j.exports;function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(t,!0).forEach((function(n){Object(l["a"])(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var D={name:"BRSUI",components:{BRSViewer:A},data:function(){return{fileToUpload:void 0,uploadFinished:!1,error:void 0,brsBuff:void 0,brs:void 0,interacting:!1,api:new p,brsInfoList:[]}},computed:{brsInfoWState:function(){return this.brsInfoList.map((function(e){return E({selected:!1},e)}))},keepSidebarOpen:function(){return this.interacting||!this.hasBRSToView},hasBRSToView:function(){return!!this.brs},fileUploadIsValid:function(){return!!this.fileToUpload&&!this.error&&this.brs}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api.getFeaturedBuilds();case 2:this.brsInfoList=e.sent.items;case 3:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),methods:{resetUpload:function(){this.$refs.fileUpload.value="",this.fileToUpload=void 0},changeBRSData:function(e){this.error=void 0,this.brsBuff=e;try{this.brs=u(BRS.read(e))}catch(n){this.error=n.message,this.brsBuff=void 0,this.brs=void 0,console.error(n)}},onFileChange:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.target.files[0],this.fileToUpload=t?u(t):void 0,t){e.next=4;break}return e.abrupt("return");case 4:return console.log("Start file convert..."),e.t0=this,e.next=8,t.arrayBuffer();case 8:e.t1=e.sent,e.t0.changeBRSData.call(e.t0,e.t1);case 10:case"end":return e.stop()}}),e,this)})));function n(n){return e.apply(this,arguments)}return n}(),onEntryClick:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n,t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.resetUpload(),this.brsInfoWState.forEach((function(e){e.selected=!1})),t.selected=!0,console.log("Start download..."),e.next=6,fetch(t.brsUrl);case 6:return r=e.sent,e.t0=this,e.next=10,r.arrayBuffer();case 10:e.t1=e.sent,e.t0.changeBRSData.call(e.t0,e.t1);case 12:case"end":return e.stop()}}),e,this)})));function n(n,t){return e.apply(this,arguments)}return n}(),stopInteracting:function(){var e=this;setTimeout((function(){e.interacting=!1}),500)},uploadFile:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.api.uploadBuild(this.brsBuff);case 2:this.uploadFinished=!0,this.resetUpload();case 4:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()}},M=D,P=(t("0ab4"),Object(R["a"])(M,o,s,!1,null,null,null)),L=P.exports,U={name:"app",components:{BRSUI:L}},I=U,V=(t("5c0b"),Object(R["a"])(I,i,a,!1,null,null,null)),z=V.exports;r["a"].config.productionTip=!1,r["a"].config.errorHandler=console.error,new r["a"]({render:function(e){return e(z)}}).$mount("#app")},"5b3a":function(e,n,t){},"5c0b":function(e,n,t){"use strict";var r=t("e332"),i=t.n(r);i.a},"8e7e":function(e,n,t){e.exports=t.p+"img/brsworld.aa9c5f2d.svg"},e332:function(e,n,t){}});
//# sourceMappingURL=app.8aeb2fa6.js.map